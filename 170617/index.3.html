<html>

<head>
    <title>Devices</title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3.0, minimum-scale=1.0">
</head>
<script type="text/javascript" src="../vendors/zeelib/ze.console.js"></script>

<body>
    <textarea id="id_ConsoleLog" wrap="off" rows="15" style="width:98%;font-family:courier;overflow: scroll;"></textarea>
    <p>
        Alpha=<label id="aA"></label> Beta=
        <label id="aB"></label> Gamma=
        <label id="aG"></label>
    </p>
    <p>
        X=<label id="aX"></label> Y=
        <label id="aY"></label> Z=
        <label id="aZ"></label>
    </p>
    <p>
        X=<label id="zX"></label> Y=
        <label id="zY"></label> Z=
        <label id="zZ"></label>
    </p>
    <script>
        console.log('Ready');
        var lastDM1 = new Date().getTime();
        var oA = 0,
            oB = 0,
            oG = 0;
        var lastDM2 = new Date().getTime();
        var oX = 0,
            oY = 0,
            oZ = 0;
        var lastDM3 = new Date().getTime();

        if (window.DeviceOrientationEvent) {
            console.log("deviceorientation is supported");
            window.addEventListener('deviceorientation', function(ev) {
                dmHdlr1(ev.alpha, ev.beta, ev.gamma);
            }, false);
        } else {
            console.log("DeviceOrientation is not supported");
        }

        function dmHdlr1(aA, aB, aG) {
            var currDM1 = new Date().getTime();
            if (currDM1 < lastDM1 + 1000) {
                return;
            }
            lastDM1 = currDM1;
            oA = aA ? aA.toFixed(1) : oA;
            oB = aB ? aB.toFixed(1) : oB;
            oG = aG ? aG.toFixed(1) : oG;
            // $('aX').innerHTML // jQuery
            document.getElementById('aA').innerHTML = oA;
            document.getElementById('aB').innerHTML = oB;
            document.getElementById('aG').innerHTML = oG;
        }

        if (window.DeviceMotionEvent) {
            console.log('devicemotion supported');
            window.addEventListener('devicemotion', function(ev) {
                //var acc = ev.acceleration;
                var acc = ev.accelerationIncludingGravity;
                dmHdlr2(acc.x, acc.y, acc.z);
            }, false);
        } else {
            console.log('devicemotion NOT supported');
        }

        function dmHdlr2(aX, aY, aZ) {
            var currDM2 = new Date().getTime();
            if (currDM2 < lastDM2 + 1000) {
                return;
            }
            lastDM2 = currDM2;
            oX = aX ? aX.toFixed(2) : oX;
            oY = aY ? aY.toFixed(2) : oY;
            oZ = aZ ? aZ.toFixed(2) : oZ;
            document.getElementById('aX').innerHTML = oX;
            document.getElementById('aY').innerHTML = oY;
            document.getElementById('aZ').innerHTML = oZ;
        }

        if (window.DeviceMotionEvent) {
            console.log('devicemotion supported');
            window.addEventListener('devicemotion', function(ev) {
                var acc = ev.acceleration;
                //var acc = ev.accelerationIncludingGravity;
                dmHdlr3(acc.x, acc.y, acc.z);
            }, false);
        } else {
            console.log('devicemotion NOT supported');
        }

        function dmHdlr3(aX, aY, aZ) {
            var currDM3 = new Date().getTime();
            if (currDM3 < lastDM3 + 1000) {
                return;
            }
            lastDM3 = currDM3;
            oX = aX ? aX.toFixed(2) : oX;
            oY = aY ? aY.toFixed(2) : oY;
            oZ = aZ ? aZ.toFixed(2) : oZ;
            document.getElementById('zX').innerHTML = oX;
            document.getElementById('zY').innerHTML = oY;
            document.getElementById('zZ').innerHTML = oZ;
        }
    </script>

</html>